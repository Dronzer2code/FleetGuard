{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/saikat/Developer/Vibe/fleet/FleetGuard/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\";\nimport { getAuth, GoogleAuthProvider } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDDcfMDHJihtSOWtR0_5tvOcfrHM4meKVg\",\n  authDomain: \"fleetguard-afd56.firebaseapp.com\",\n  projectId: \"fleetguard-afd56\",\n  storageBucket: \"fleetguard-afd56.firebasestorage.app\",\n  messagingSenderId: \"183217584134\",\n  appId: \"1:183217584134:web:7948017495c3969d4deb87\",\n  measurementId: \"G-030H14JYX1\"\n};\n\n// Initialize Firebase\nlet app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst storage = getStorage(app);\nconst googleProvider = new GoogleAuthProvider();\n\nexport { app, auth, db, storage, googleProvider };\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,sBAAsB;AACtB,IAAI,MAAM,IAAA,8KAAO,IAAG,MAAM,KAAK,IAAI,IAAA,oLAAa,EAAC,kBAAkB,IAAA,8KAAO,GAAE,CAAC,EAAE;AAC/E,MAAM,OAAO,IAAA,wKAAO,EAAC;AACrB,MAAM,KAAK,IAAA,kLAAY,EAAC;AACxB,MAAM,UAAU,IAAA,8KAAU,EAAC;AAC3B,MAAM,iBAAiB,IAAI,mLAAkB"}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///Users/saikat/Developer/Vibe/fleet/FleetGuard/app/login/page.js"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { \n  createUserWithEmailAndPassword, \n  signInWithEmailAndPassword, \n  signInWithPopup, \n  updateProfile,\n  onAuthStateChanged\n} from \"firebase/auth\";\nimport { doc, setDoc, serverTimestamp } from \"firebase/firestore\";\nimport { auth, db, googleProvider } from '../../lib/firebase';\n\nexport default function LoginPage() {\n  const [isSignUp, setIsSignUp] = useState(false);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [name, setName] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [toast, setToast] = useState({ show: false, message: '', type: 'success' });\n  const router = useRouter();\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\n      if (user) {\n        router.push('/dashboard');\n      }\n    });\n    return () => unsubscribe();\n  }, [router]);\n\n  const showToast = (message, type = 'success') => {\n    setToast({ show: true, message, type });\n    setTimeout(() => setToast({ show: false, message: '', type: 'success' }), 3000);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    if (isSignUp && name.length < 2) {\n      setError('Name must be at least 2 characters');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      if (isSignUp) {\n        // Sign Up\n        const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n        const user = userCredential.user;\n\n        // Update Profile\n        await updateProfile(user, { displayName: name });\n\n        // Create User Document\n        await setDoc(doc(db, \"users\", user.uid), {\n          name: name,\n          email: email,\n          createdAt: serverTimestamp()\n        });\n\n        showToast('Account created successfully!', 'success');\n      } else {\n        // Sign In\n        await signInWithEmailAndPassword(auth, email, password);\n        showToast('Signed in successfully!', 'success');\n      }\n      // Redirect handled by onAuthStateChanged\n    } catch (err) {\n      console.error(err);\n      let msg = 'Authentication failed';\n      if (err.code === 'auth/email-already-in-use') msg = 'Email already in use';\n      if (err.code === 'auth/wrong-password') msg = 'Invalid password';\n      if (err.code === 'auth/user-not-found') msg = 'User not found';\n      if (err.code === 'auth/weak-password') msg = 'Password should be at least 6 characters';\n      if (err.code === 'auth/invalid-credential') msg = 'Invalid credentials';\n      \n      setError(msg);\n      showToast(msg, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGoogleSignIn = async () => {\n    try {\n      const result = await signInWithPopup(auth, googleProvider);\n      const user = result.user;\n\n      // Check if user doc exists, if not create it (merge: true handles updates)\n      await setDoc(doc(db, \"users\", user.uid), {\n        name: user.displayName,\n        email: user.email,\n        lastLogin: serverTimestamp()\n      }, { merge: true });\n\n      showToast('Signed in with Google!', 'success');\n    } catch (err) {\n      console.error(err);\n      showToast('Google sign in failed', 'error');\n    }\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <div className=\"auth-card\">\n        <div className=\"auth-header\">\n          <div className=\"logo\" style={{ justifyContent: 'center', marginBottom: '1rem' }}>\n            <i className=\"fa-solid fa-truck-fast\"></i> FLEETGUARD\n          </div>\n          <h2>{isSignUp ? 'Create Account' : 'Welcome Back'}</h2>\n          <p>{isSignUp ? 'Start managing your fleet today' : 'Sign in to manage your fleet'}</p>\n        </div>\n\n        <form onSubmit={handleSubmit} id=\"auth-form\">\n          {isSignUp && (\n            <div className=\"form-group\">\n              <label htmlFor=\"name\">Full Name</label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                className=\"form-input\"\n                placeholder=\"John Doe\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                required={isSignUp}\n              />\n            </div>\n          )}\n\n          <div className=\"form-group\">\n            <label htmlFor=\"email\">Email Address</label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              className=\"form-input\"\n              placeholder=\"name@company.com\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              className=\"form-input\"\n              placeholder=\"••••••••\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n            />\n          </div>\n\n          {error && <div className=\"error-message\" style={{ display: 'block', marginBottom: '1rem' }}>{error}</div>}\n\n          <button type=\"submit\" className=\"btn btn-primary btn-full\" disabled={loading} style={{ opacity: loading ? 0.7 : 1 }}>\n            <span className=\"btn-text\">{loading ? 'Processing...' : (isSignUp ? 'Create Account' : 'Sign In')}</span>\n            {!loading && <i className=\"fa-solid fa-arrow-right\"></i>}\n          </button>\n        </form>\n\n        <div className=\"auth-divider\">\n          <span>or</span>\n        </div>\n\n        <button onClick={handleGoogleSignIn} className=\"btn btn-google\">\n          <img src=\"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg\" alt=\"Google\" width=\"18\" />\n          Continue with Google\n        </button>\n\n        <div style={{ marginTop: '1.5rem', fontSize: '0.9rem' }}>\n          <span>{isSignUp ? 'Already have an account?' : \"Don't have an account?\"}</span>\n          <button \n            onClick={() => setIsSignUp(!isSignUp)} \n            className=\"btn-link\" \n            style={{ fontWeight: 600, marginLeft: '0.5rem', background: 'none', border: 'none', cursor: 'pointer', color: 'var(--color-primary)' }}\n          >\n            {isSignUp ? 'Sign in' : 'Sign up'}\n          </button>\n        </div>\n      </div>\n\n      {toast.show && (\n        <div className={`toast ${toast.show ? 'show' : ''}`} style={{ display: 'flex', opacity: 1, transform: 'translateY(0)' }}>\n          <i className={`fa-solid ${toast.type === 'success' ? 'fa-circle-check' : 'fa-circle-exclamation'}`}></i>\n          <span>{toast.message}</span>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}