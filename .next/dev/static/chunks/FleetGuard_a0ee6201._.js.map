{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/OneDrive/Documents/Web%20Projects/FleetGuaard/FleetGuard/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\";\r\nimport { getAuth, GoogleAuthProvider } from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { getStorage } from \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDDcfMDHJihtSOWtR0_5tvOcfrHM4meKVg\",\r\n  authDomain: \"fleetguard-afd56.firebaseapp.com\",\r\n  projectId: \"fleetguard-afd56\",\r\n  storageBucket: \"fleetguard-afd56.firebasestorage.app\",\r\n  messagingSenderId: \"183217584134\",\r\n  appId: \"1:183217584134:web:7948017495c3969d4deb87\",\r\n  measurementId: \"G-030H14JYX1\"\r\n};\r\n\r\n// Initialize Firebase\r\nlet app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\r\nconst auth = getAuth(app);\r\nconst db = getFirestore(app);\r\nconst storage = getStorage(app);\r\nconst googleProvider = new GoogleAuthProvider();\r\n\r\nexport { app, auth, db, storage, googleProvider };\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,sBAAsB;AACtB,IAAI,MAAM,IAAA,4LAAO,IAAG,MAAM,KAAK,IAAI,IAAA,kMAAa,EAAC,kBAAkB,IAAA,4LAAO,GAAE,CAAC,EAAE;AAC/E,MAAM,OAAO,IAAA,sLAAO,EAAC;AACrB,MAAM,KAAK,IAAA,gMAAY,EAAC;AACxB,MAAM,UAAU,IAAA,4LAAU,EAAC;AAC3B,MAAM,iBAAiB,IAAI,iMAAkB"}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/OneDrive/Documents/Web%20Projects/FleetGuaard/FleetGuard/app/login/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { \r\n  createUserWithEmailAndPassword, \r\n  signInWithEmailAndPassword, \r\n  signInWithPopup, \r\n  updateProfile,\r\n  onAuthStateChanged\r\n} from \"firebase/auth\";\r\nimport { doc, setDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { auth, db, googleProvider } from '../../lib/firebase';\r\n\r\nexport default function LoginPage() {\r\n  const [isSignUp, setIsSignUp] = useState(false);\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [name, setName] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [toast, setToast] = useState({ show: false, message: '', type: 'success' });\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n      if (user) {\r\n        router.push('/dashboard');\r\n      }\r\n    });\r\n    return () => unsubscribe();\r\n  }, [router]);\r\n\r\n  const showToast = (message, type = 'success') => {\r\n    setToast({ show: true, message, type });\r\n    setTimeout(() => setToast({ show: false, message: '', type: 'success' }), 3000);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setLoading(true);\r\n\r\n    if (isSignUp && name.length < 2) {\r\n      setError('Name must be at least 2 characters');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (isSignUp) {\r\n        // Sign Up\r\n        const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n        const user = userCredential.user;\r\n\r\n        // Update Profile\r\n        await updateProfile(user, { displayName: name });\r\n\r\n        // Create User Document\r\n        await setDoc(doc(db, \"users\", user.uid), {\r\n          name: name,\r\n          email: email,\r\n          createdAt: serverTimestamp()\r\n        });\r\n\r\n        showToast('Account created successfully!', 'success');\r\n      } else {\r\n        // Sign In\r\n        await signInWithEmailAndPassword(auth, email, password);\r\n        showToast('Signed in successfully!', 'success');\r\n      }\r\n      // Redirect handled by onAuthStateChanged\r\n    } catch (err) {\r\n      console.error(err);\r\n      let msg = 'Authentication failed';\r\n      if (err.code === 'auth/email-already-in-use') msg = 'Email already in use';\r\n      if (err.code === 'auth/wrong-password') msg = 'Invalid password';\r\n      if (err.code === 'auth/user-not-found') msg = 'User not found';\r\n      if (err.code === 'auth/weak-password') msg = 'Password should be at least 6 characters';\r\n      if (err.code === 'auth/invalid-credential') msg = 'Invalid credentials';\r\n      \r\n      setError(msg);\r\n      showToast(msg, 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGoogleSignIn = async () => {\r\n    try {\r\n      const result = await signInWithPopup(auth, googleProvider);\r\n      const user = result.user;\r\n\r\n      // Check if user doc exists, if not create it (merge: true handles updates)\r\n      await setDoc(doc(db, \"users\", user.uid), {\r\n        name: user.displayName,\r\n        email: user.email,\r\n        lastLogin: serverTimestamp()\r\n      }, { merge: true });\r\n\r\n      showToast('Signed in with Google!', 'success');\r\n    } catch (err) {\r\n      console.error(err);\r\n      showToast('Google sign in failed', 'error');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-container\">\r\n      <div className=\"auth-card\">\r\n        <div className=\"auth-header\">\r\n          <div className=\"logo\" style={{ justifyContent: 'center', marginBottom: '1rem' }}>\r\n            <i className=\"fa-solid fa-truck-fast\"></i> FLEETGUARD\r\n          </div>\r\n          <h2>{isSignUp ? 'Create Account' : 'Welcome Back'}</h2>\r\n          <p>{isSignUp ? 'Start managing your fleet today' : 'Sign in to manage your fleet'}</p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} id=\"auth-form\">\r\n          {isSignUp && (\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"name\">Full Name</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"name\"\r\n                className=\"form-input\"\r\n                placeholder=\"John Doe\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n                required={isSignUp}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"email\">Email Address</label>\r\n            <input\r\n              type=\"email\"\r\n              id=\"email\"\r\n              className=\"form-input\"\r\n              placeholder=\"name@company.com\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"password\">Password</label>\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              className=\"form-input\"\r\n              placeholder=\"••••••••\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {error && <div className=\"error-message\" style={{ display: 'block', marginBottom: '1rem' }}>{error}</div>}\r\n\r\n          <button type=\"submit\" className=\"btn btn-primary btn-full\" disabled={loading} style={{ opacity: loading ? 0.7 : 1 }}>\r\n            <span className=\"btn-text\">{loading ? 'Processing...' : (isSignUp ? 'Create Account' : 'Sign In')}</span>\r\n            {!loading && <i className=\"fa-solid fa-arrow-right\"></i>}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"auth-divider\">\r\n          <span>or</span>\r\n        </div>\r\n\r\n        <button onClick={handleGoogleSignIn} className=\"btn btn-google\">\r\n          <img src=\"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg\" alt=\"Google\" width=\"18\" />\r\n          Continue with Google\r\n        </button>\r\n\r\n        <div style={{ marginTop: '1.5rem', fontSize: '0.9rem' }}>\r\n          <span>{isSignUp ? 'Already have an account?' : \"Don't have an account?\"}</span>\r\n          <button \r\n            onClick={() => setIsSignUp(!isSignUp)} \r\n            className=\"btn-link\" \r\n            style={{ fontWeight: 600, marginLeft: '0.5rem', background: 'none', border: 'none', cursor: 'pointer', color: 'var(--color-primary)' }}\r\n          >\r\n            {isSignUp ? 'Sign in' : 'Sign up'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {toast.show && (\r\n        <div className={`toast ${toast.show ? 'show' : ''}`} style={{ display: 'flex', opacity: 1, transform: 'translateY(0)' }}>\r\n          <i className={`fa-solid ${toast.type === 'success' ? 'fa-circle-check' : 'fa-circle-exclamation'}`}></i>\r\n          <span>{toast.message}</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}